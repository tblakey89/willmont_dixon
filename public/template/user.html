<div id="content" ng-init="getUser()">
	<div class="container">
		
		<div class="row">
			
			<div class="span3">
				
				<menu active="user"></menu>
				
		
			</div> <!-- /span3 -->
			
			
			
			<div class="span9">
				
				<h1 class="page-title">
					User Account					
				</h1>

				<div class="stat-container">
					
					<div class="stat-holder">						
						<div class="stat">							
							<span>{{user.green_cards}}</span>							
							Green Cards	(Last 12 months)						
						</div> <!-- /stat -->						
					</div> <!-- /stat-holder -->
					
					<div class="stat-holder">						
						<div class="stat">							
							<span>{{user.yellow_cards}}</span>							
							Yellow Cards (Last 12 months)						
						</div> <!-- /stat -->						
					</div> <!-- /stat-holder -->
					
					<div class="stat-holder">						
						<div class="stat">							
							<span>{{user.red_cards}}</span>							
							Red Cards (Last 12 months)					
						</div> <!-- /stat -->						
					</div> <!-- /stat-holder -->
					
				</div> <!-- /stat-container -->
				
				
				<div class="row">
					
					<div class="span9">
				
						<div class="widget">
							
							<div class="widget-header">
								<i class="icon-user"></i> 
								<h3>User Information</h3>
							</div> <!-- /widget-header -->
									
							<div class="widget-content">
								<div class="row">
									<div class="span2 offset3"  ng-hide="user.profile == undefined">
										<img class="profile_image" ng-src="/images/{{user.profile}}"/>
									</div>
									<div class="span4">
										<table class="information-table">
											<tr>
												<td>First Name:</td>
												<td>{{user.first_name}}</td>
											</tr>
											<tr>
												<td>Last Name:</td>
												<td>{{user.last_name}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>Email:</td>
												<td>{{user.email}}</td>
											</tr>
											<tr>
												<td>Job:</td>
												<td>{{user.job}}</td>
											</tr>
											<tr>
												<td>Health Issues</td>
												<td>{{yesOrNo(user.health_issues)}}</td>
											</tr>
											<tr>
												<td>Is Supervisor?</td>
												<td>{{yesOrNo(user.is_supervisor)}}</td>
											</tr>
											<tr>
												<td>CSCS Number</td>
												<td>{{user.cscs_number}}</td>
											</tr>
											<tr>
												<td>CSCS Expiry Date</td>
												<td>{{user.cscs_expiry_month}}</td>
											</tr>
											<tr>
												<td>Date of Birth</td>
												<td>{{user.date_of_birth}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>National Insurance</td>
												<td>{{user.national_insurance}}</td>
											</tr>
											<tr>
												<td>Completed Pre Enrolment</td>
												<td>{{user.completed_pre_enrolment}}</td>
											</tr>
											<tr>
												<td>Pre Enrolment Due</td>
												<td>{{user.pre_enrolment_due}}</td>
											</tr>
										</table>
									</div>
									<div class="span4">
										<table  class="information-table">
											<tr ng-show="allowed(3)">
												<td>Contact Number</td>
												<td>{{user.contact_number}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>Address Line 1</td>
												<td>{{user.address_line_1}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>Address Line 2</td>
												<td>{{user.address_line_2}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>Town/City</td>
												<td>{{user.city}}</td>
											</tr>
											<tr ng-show="allowed(3)">
												<td>Postcode</td>
												<td>{{user.postcode}}</td>
											</tr>
											<tr>
												<td>Working At Height:</td>
												<td>{{yesOrNo(user.work_at_height)}}</td>
											</tr>
											<tr>
												<td>Scaffolder:</td>
												<td>{{yesOrNo(user.scaffolder)}}</td>
											</tr>
											<tr>
												<td>Ground Worker:</td>
												<td>{{yesOrNo(user.ground_worker)}}</td>
											</tr>
											<tr>
												<td>Operates Plant and/or Machinery:</td>
												<td>{{yesOrNo(user.operate_machinery)}}</td>
											</tr>
											<tr>
												<td>Mechanical Lifting of Loads:</td>
												<td>{{yesOrNo(user.lift_loads)}}</td>
											</tr>
										</table>
									</div>
								</div>
												
								<br />
								
									
								<div class="form-actions">
									<a href="/admin/users/{{user.id}}/edit" class="btn btn-warning">Edit</a> 
									<a ng-click="deleteUser()" class="btn btn-danger">Delete</a>
								</div> <!-- /form-actions -->							
								
							</div> <!-- /widget-content -->
							
						</div> <!-- /widget -->

						<div class="widget" ng-show="employer">
							
							<div class="widget-header">
								<i class="icon-user"></i> 
								<h3>Employer Information</h3>
							</div> <!-- /widget-header -->
									
							<div class="widget-content">
								<div class="row">
									<div class="span9">
										<table class="information-table">
											<tr>
												<td>Company Name:</td>
												<td>{{employer.company_name}}</td>
											</tr>
											<tr>
												<td>Contact Number:</td>
												<td>{{employer.contact_number}}</td>
											</tr>
											<tr>
												<td>Address Line 1:</td>
												<td>{{employer.address_line_1}}</td>
											</tr>
											<tr>
												<td>Address Line 2:</td>
												<td>{{employer.address_line_2}}</td>
											</tr>
											<tr>
												<td>Town/City</td>
												<td>{{employer.city}}</td>
											</tr>
											<tr>
												<td>Postal Code</td>
												<td>{{employer.postal_code}}</td>
											</tr>
										</table>
									</div>
								</div>					
								
							</div> <!-- /widget-content -->
							
						</div> <!-- /widget -->

						<div class="widget widget-table" ng-show="allowed(3)">
										
							<div class="widget-header">
								<i class="icon-user"></i>
								<h3>Next Of Kin</h3>
								<a href="/admin/users/{{user.id}}/next_of_kins/new" class="btn btn-small btn-success" ng-show="allowed(3)">Add</a>
								<search searchmodel="kinSearch"></search>
							</div> <!-- /widget-header -->
							
							<div class="widget-content">
							
								<table class="table table-striped table-bordered" ng-init="getNextOfKins()">
									<thead>
										<tr>
											<th>Name</th>
											<th>Relationship</th>
											<th>Phone Number</th>
											<th></th>
										</tr>
									</thead>
									
									<tbody>
										<tr ng-repeat="item in nextOfKins | filter:kinSearch">
											<td><a href="/admin/users/{{user.id}}/next_of_kins/{{item.next_of_kin.id}}">{{item.next_of_kin.first_name}} {{item.next_of_kin.last_name}}</a></td>
											<td>{{item.next_of_kin.relationship}}</td>
											<td>{{item.next_of_kin.contact_number}}</td>
											<td class="action-td">
												<a href="/admin/users/{{user.id}}/next_of_kins/{{item.next_of_kin.id}}/edit" class="btn btn-small btn-warning"><i class="icon-pencil"></i></a>						
												<a href="" ng-click="deleteNextOfKin(item.next_of_kin.id, $index)" class="btn btn-small btn-danger" ng-show="allowed(3)"><i class="icon-remove"></i></a>
											</td>
										</tr>
									</tbody>
								</table>
							
							</div> <!-- /widget-content -->
							
						</div> <!-- /widget -->

						<div class="widget widget-table">
										
							<div class="widget-header">
								<i class="icon-th-large"></i>
								<h3>Disciplinary Cards</h3>
								<a href="/admin/users/{{user.id}}/new_disciplinary_card" class="btn btn-small btn-success" ng-show="allowed(2)">Add</a>
								<search searchmodel="cardSearch" currentpage="currentPage"></search>	
							</div> <!-- /widget-header -->
							
							<div class="widget-content">
							
								<table class="table table-striped table-bordered" ng-init="getDisciplinaryCards()">
									<thead>
										<tr>
											<th>Colour</th>
											<th>Location</th>
											<th></th>
										</tr>
									</thead>
									
									<tbody>
										<tr ng-repeat="item in disciplinaryCards | filter:cardSearch">
											<td>{{item.disciplinary_card.colour}}</td>
											<td>{{item.disciplinary_card.location}}</td>
											<td class="action-td">
												<a href="/admin/disciplinary_cards/{{item.disciplinary_card.id}}" class="btn btn-small btn-success"><i class="icon-search"></i></a>
												<a ng-click="deleteDisciplinaryCard(item.disciplinary_card.id, $index)" class="btn btn-small btn-danger" ng-show="allowed(3)"><i class="icon-remove"></i></a>
											</td>
										</tr>
									</tbody>
								</table>
							
							</div> <!-- /widget-content -->

						</div>
						
					</div> <!-- /span9 -->
					
				</div> <!-- /row -->

			</div> <!-- /span9 -->
			
		</div> <!-- /row -->
		
	</div> <!-- /container -->
	
</div> <!-- /content -->